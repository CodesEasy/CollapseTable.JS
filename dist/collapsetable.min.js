/*!
 * CollapseTable v1.2.0
 * Lightweight, dependency-free JavaScript library that makes plain HTML tables responsive
 * by collapsing lower-priority columns into a per-row “details” panel with a +/− toggle.
 *
 * Author: Vishnu – https://vishnu.wiki
 * Company: Codes Easy – https://www.codeseasy.com
 *
 * License: MIT
 * -----------------------------------------------------------------------------
 * MIT License
 *
 * Copyright (c) 2025 Vishnu (Codes Easy)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * -----------------------------------------------------------------------------
 *
 * Guarantees in this build:
 * - Table is forced to 100% width of its parent by default (inline, only if unset).
 * - Table headers and cells are left-aligned by default (scoped to .ctbl only).
 * - Columns collapse based on priorities and width hints; details render as "Label: Value".
 * - Production-grade: resize fallbacks, hidden-container deferral, multi-TBODY support,
 *   accessibility improvements, attribute-aware updates, stable row IDs, setAll/unsetAll,
 *   per-row controls, detailsRender hook, dynamic TBODY tracking, and more.
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.CollapseTable=e()}("undefined"!=typeof self?self:this,function(){"use strict";const t="development",e="production";function s(s){return s===t?t:e}const i=t=>"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,16);function o(t){return t?"string"==typeof t?t.startsWith("#")?document.getElementById(t.slice(1)):document.getElementById(t)||document.querySelector(t):t&&1===t.nodeType?t:null:null}function n(t){return t?"string"==typeof t?Array.from(document.querySelectorAll(t)):t instanceof Element?[t]:t instanceof NodeList||t instanceof HTMLCollection?Array.from(t):Array.isArray(t)?t.filter(t=>t instanceof Element):[]:[]}function r(t,e){const s=document.createElement(t);return e&&(s.className=e),s}function l(t,e,s){const i=l._store||(l._store=new WeakMap);let o=i.get(t);o||(o=new Set,i.set(t,o)),o.has(e)||(o.add(e),s())}function a(t,e){const s=Object.assign({},t);if(!e)return s;for(const i in e){if(!Object.prototype.hasOwnProperty.call(e,i))continue;const o=e[i];o&&"object"==typeof o&&!Array.isArray(o)?s[i]=a(t[i]||{},o):s[i]=o}return s}function h(t){if(!t)return!1;const e=window.getComputedStyle(t);return e&&"none"!==e.display&&"hidden"!==e.visibility}function c(t){const e=String(t||"").trim().split(/\s+/).filter(Boolean);return"button"+(e.length?"."+e.join("."):"")}function d(t,e){if(!t)return!1;return String(e||"").trim().split(/\s+/).filter(Boolean).every(e=>t.classList.contains(e))}let p=0;class f{constructor(t,e,i,o){if(!(t instanceof HTMLTableElement))throw new Error("CollapseTable: target is not a <table> element.");this.table=t,this.options=e,this.emit=i,this._mode=s(o),this._rowKeyMap=new WeakMap,this._rowKeySeq=0,this._unsupportedSpan=!1,this._destroyed=!1,this._insertedControl=!1,this._uid=++p,this._initOnce()}_setMode(t){this._mode=s(t)}_initOnce(){if(function(){if(document.getElementById("ctbl-core-styles"))return;const t=document.createElement("style");t.id="ctbl-core-styles",t.type="text/css",t.appendChild(document.createTextNode("\n      .ctbl-hide { display: none; }\n      .ctbl-vh { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }\n      .ctbl-details-row[hidden] { display: none; }\n      .ctbl-control .ctbl-toggle { cursor: pointer; }\n    ")),document.head.appendChild(t)}(),this.table.classList.contains(this.options.classNames.root)||this.table.classList.add(this.options.classNames.root),this.table.style.width||(this.table.style.width="100%"),this.table.style.tableLayout||(this.table.style.tableLayout=this.options.tableLayout),this.thead=this.table.tHead,!this.thead||!this.thead.rows.length)throw new Error("CollapseTable: table <thead> with at least one <tr> is required.");if(this.headerRow=this.thead.rows[0],this.tbodies=Array.from(this.table.tBodies||[]),!this.tbodies.length)throw new Error("CollapseTable: table <tbody> is required.");this._checkSpans(),this._toggleSelector=c(this.options.classNames.toggle),this._ensureControlColumn(),this.headers=Array.from(this.headerRow.cells),this.ctrlIndex=0,this._buildColumns(),this._mountAllBodies(),this._refit(!0),this._observe()}_checkSpans(){const e=Array.from(this.headerRow.cells).some(t=>1!==t.colSpan||1!==t.rowSpan),s=this.tbodies.some(t=>Array.from(t.rows).some(t=>Array.from(t.cells).some(t=>1!==t.colSpan||1!==t.rowSpan)));(e||s)&&(this._unsupportedSpan=!0,l(this.table,"span-warning",()=>{this._mode===t&&console.warn("CollapseTable: <colspan> / <rowspan> detected. Responsive collapsing is disabled for this table; base styles still applied.")}))}_getWrapper(){return this.table.parentElement||this.table}_ensureControlColumn(){const t=this.headerRow.cells[0];if(t&&d(t,this.options.classNames.control)){const t=this.headerRow.cells[0];t.setAttribute("aria-hidden","true"),t.setAttribute("scope","col")}else{const t=r("th",this.options.classNames.control);t.setAttribute("aria-hidden","true"),t.setAttribute("scope","col"),this.headerRow.insertBefore(t,this.headerRow.firstChild),this._insertedControl=!0;for(const t of this.tbodies)for(const e of Array.from(t.rows)){const t=r("td",this.options.classNames.control);e.insertBefore(t,e.firstChild)}}}_buildColumns(){const e=Array.from(this.headerRow.cells);e.forEach(t=>t.classList.remove(this.options.classNames.hide));const s=t=>{const e=Number(t.getAttribute(this.options.attrs.min))||0,s=Math.ceil(t.clientWidth||t.offsetWidth||0);return e>0?e:s>0?s:this.options.minWidthDefault},i=[],o=[];for(let t=0;t<e.length;t++){const n=e[t],r=0===t,l=n.getAttribute(this.options.attrs.priority),a=l?Number(l):r?1:t+1,h=r?this.options.controlWidth:s(n),c=r||1===a;i.push({index:t,th:n,priority:a,min:h,lock:c}),r||o.push(a)}return l(this.table,"priority-warn",()=>{if(this._mode!==t)return;const e=o.filter(t=>1===t).length;e>1&&console.warn(`CollapseTable: ${e} columns use data-priority="1" (never hidden). Consider lowering some to 2+ so columns can collapse on smaller widths.`);o.some(t=>Number.isNaN(t)||t<1)&&console.warn("CollapseTable: Some columns have invalid/missing data-priority; default ordering will be used.")}),this.columnsMeta=i,i}_mountAllBodies(){for(const t of this.tbodies)this._mountRowsInBody(t);this._clickHandler=t=>{const e=t.target,s=e&&e.closest&&e.closest(this._toggleSelector);if(!s||!this.table.contains(s))return;t.preventDefault();const i=s.closest("tr");i&&this.toggle(i)},this._keyHandler=t=>{const e=t.target,s=e&&e.closest&&e.closest(this._toggleSelector);if(s&&this.table.contains(s)&&("Enter"===t.key||" "===t.key)){t.preventDefault();const e=s.closest("tr");if(!e)return;this.toggle(e)}},this.table.addEventListener("click",this._clickHandler),this.table.addEventListener("keydown",this._keyHandler)}_mountRowsInBody(t){const e=Array.from(t.rows).filter(t=>!t.classList.contains(this.options.classNames.details));for(const t of e){const e=t.cells[0];if(!e||!d(e,this.options.classNames.control)){const e=r("td",this.options.classNames.control);t.insertBefore(e,t.firstChild)}if(!this._rowKeyMap.has(t)){const e=t.getAttribute("data-ctbl-key")||String(++this._rowKeySeq);this._rowKeyMap.set(t,e)}const s=t.cells[0];if(!s.querySelector(this._toggleSelector)){const e=this._detailsIdForRow(t),i=r("button",this.options.classNames.toggle);i.type="button",i.setAttribute("aria-expanded","false"),i.setAttribute("aria-controls",e),i.setAttribute("title",this.options.strings.toggleTitle),i.setAttribute("aria-label",this.options.strings.toggleTitle),i.innerHTML=this.options.icons.expand+`<span class="ctbl-vh">${this.options.strings.toggleTitle}</span>`,s.appendChild(i)}const i=t.nextElementSibling;if(i&&i.classList&&i.classList.contains(this.options.classNames.details)){const t=i.cells&&i.cells[0];t&&t.colSpan!==this.headerRow.cells.length&&(t.colSpan=this.headerRow.cells.length)}else{const e=r("tr",this.options.classNames.details);e.classList.add("ctbl-details-row"),e.setAttribute("hidden","");const s=document.createElement("td");s.colSpan=this.headerRow.cells.length;const i=r("div",this.options.classNames.detailsInner);i.setAttribute("role","region"),i.setAttribute("aria-live","polite"),s.appendChild(i),e.appendChild(s),e.id=this._detailsIdForRow(t),t.insertAdjacentElement("afterend",e)}}}_observe(){this.wrapper=this._getWrapper();const t="undefined"!=typeof window&&window.ResizeObserver?window.ResizeObserver:null;if(t?(this._resizeObserver=new t(()=>{this._destroyed||i(()=>this._refit())}),this._resizeObserver.observe(this.wrapper),this.wrapper!==this.table&&this._resizeObserver.observe(this.table),this._headerResizeObserver=new t(()=>{this._destroyed||i(()=>this.refresh())}),this._headerResizeObserver.observe(this.headerRow)):(this._onWinResize=function(t,e){let s,i,o,n=0;return function(){const r=Date.now();i=this,o=arguments;const l=e-(r-n);l<=0||l>e?(s&&(clearTimeout(s),s=null),n=r,t.apply(i,o)):s||(s=setTimeout(()=>{n=Date.now(),s=null,t.apply(i,o)},l))}}(()=>{this._destroyed||this._refit()},100),window.addEventListener("resize",this._onWinResize)),this.options.deferWhenHidden&&"undefined"!=typeof window&&"IntersectionObserver"in window){const t=window.IntersectionObserver;this._intersectObserver=new t(t=>{for(const e of t)e.isIntersecting&&this._refit()},{root:null,threshold:.01}),this._intersectObserver.observe(this.table)}const e="undefined"!=typeof window&&(window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver);e&&(this._tbodyObservers=this.tbodies.map(t=>{const s=new e(()=>{this._mountRowsInBody(t),this._refit()});return s.observe(t,{childList:!0,subtree:!1}),s}),this._theadObserver=new e(t=>{let e=!1;for(const s of t)if("childList"===s.type||"attributes"===s.type&&("TH"===s.target.tagName||s.target===this.headerRow)){e=!0;break}e&&(this.headerRow=this.thead.rows[0],this.headers=Array.from(this.headerRow.cells),this._buildColumns(),this._mountAllBodies(),this._refit())}),this._theadObserver.observe(this.thead,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[this.options.attrs.priority,this.options.attrs.min,this.options.attrs.label]}),this._tableObserver=new e(t=>{let s=!1;for(const e of t)if("childList"===e.type){const t=Array.from(e.addedNodes||[]).some(t=>"TBODY"===t.nodeName),i=Array.from(e.removedNodes||[]).some(t=>"TBODY"===t.nodeName);if(t||i){s=!0;break}}s&&(this._tbodyObservers&&this._tbodyObservers.forEach(t=>t.disconnect&&t.disconnect()),this.tbodies=Array.from(this.table.tBodies||[]),this._tbodyObservers=this.tbodies.map(t=>{const s=new e(()=>{this._mountRowsInBody(t),this._refit()});return s.observe(t,{childList:!0,subtree:!1}),s}),this.tbodies.forEach(t=>this._mountRowsInBody(t)),this._refit())}),this._tableObserver.observe(this.table,{childList:!0,subtree:!1}))}_detailsIdForRow(t){const e=this._rowKeyMap.get(t)||"x";return`${this.table.id?this.table.id:`ctbl-${this._uid}`}-row-${e}-details`}_availableWidth(){const t=this.wrapper&&this.wrapper.clientWidth?this.wrapper.clientWidth:this.table&&this.table.clientWidth?this.table.clientWidth:"undefined"!=typeof window?window.innerWidth:0;return!(h(this.wrapper)&&h(this.table))&&this.options.deferWhenHidden?("undefined"!=typeof window?window.innerWidth:1024)||1024:t>0?t:("undefined"!=typeof window?window.innerWidth:1024)||1024}_syncDetailsColspan(){const t=this.headerRow.cells.length;for(const e of this.tbodies)for(const s of Array.from(e.rows)){if(!s.classList.contains(this.options.classNames.details))continue;const e=s.cells&&s.cells[0];e&&e.colSpan!==t&&(e.colSpan=t)}}_applyVisibility(t){for(const e of this.columnsMeta){const s=t.has(e.index);e.th.classList.toggle(this.options.classNames.hide,s)}for(const e of this.tbodies)for(const s of Array.from(e.rows))if(!s.classList.contains(this.options.classNames.details))for(const e of this.columnsMeta){const i=s.cells[e.index];i&&i.classList.toggle(this.options.classNames.hide,t.has(e.index))}this._syncDetailsColspan()}_firstVisibleCellText(t,e){for(const s of this.columnsMeta)if(0!==s.index&&!e.has(s.index)){const e=t.cells[s.index];if(e){const t=(e.textContent||"").trim();if(t)return t}}return""}_renderDetailsForRow(t,e,s){const i=e.querySelector("."+this.options.classNames.detailsInner);if(!i)return;i.innerHTML="";const o=this._firstVisibleCellText(t,s);o?i.setAttribute("aria-label",`Details for ${o}`):i.setAttribute("aria-label","Row details");const n=Array.from(t.cells);if("function"==typeof this.options.detailsRender){const e=this.columnsMeta.filter(t=>s.has(t.index)&&0!==t.index),o=this.options.detailsRender(t,e,n);if(o instanceof Node)return void i.appendChild(o);if("string"==typeof o)return void(i.innerHTML=o)}for(const t of this.columnsMeta){if(0===t.index)continue;if(!s.has(t.index))continue;const e=(t.th.getAttribute(this.options.attrs.label)||t.th.textContent||"").trim(),o=r("div",this.options.classNames.detail),l=r("span",this.options.classNames.name),a=r("span",this.options.classNames.value);l.textContent=e?e+": ":"",a.innerHTML=n[t.index]?.innerHTML??"",o.appendChild(l),o.appendChild(a),i.appendChild(o)}}_updateTogglesVisibility(t,e){const s=!t,i=this.headerRow&&this.headerRow.cells&&this.headerRow.cells[0];i&&i.classList.toggle(this.options.classNames.hide,s);for(const i of this.tbodies){const o=Array.from(i.rows).filter(t=>!t.classList.contains(this.options.classNames.details));for(const i of o){const o=i.cells&&i.cells[0];o&&o.classList.toggle(this.options.classNames.hide,s);const n=i.querySelector(this._toggleSelector);if(!n)continue;n.style.visibility=t?"visible":"hidden";const r=this.columnsMeta.filter(t=>e.has(t.index)&&0!==t.index).length,l=this.options.strings.toggleTitle;n.setAttribute("aria-label",t?`${l} (${r} hidden)`:l);const a=i.nextElementSibling,h="true"===n.getAttribute("aria-expanded");a&&a.classList.contains(this.options.classNames.details)&&!a.hidden&&h&&this._renderDetailsForRow(i,a,e)}}}_refit(t=!1){if(this._unsupportedSpan)return;const e=this._availableWidth(),s=function(t,e){const s=t.map(t=>({index:t.index,min:t.min,priority:t.priority,lock:!!t.lock,hidden:!1})),i=()=>s.filter(t=>!t.hidden).reduce((t,e)=>t+e.min,0);let o=200;for(;i()>e&&o-- >0;){const t=s.filter(t=>!t.hidden&&!t.lock&&0!==t.index).sort((t,e)=>e.priority-t.priority||e.min-t.min)[0];if(!t)break;t.hidden=!0}o=200;let n=!0;for(;n&&o-- >0;){n=!1;const t=s.filter(t=>t.hidden).sort((t,e)=>t.priority-e.priority||t.min-e.min);for(const s of t)s.hidden=!1,i()<=e?n=!0:s.hidden=!0}return new Set(s.filter(t=>t.hidden).map(t=>t.index))}(this.columnsMeta.map(t=>({index:t.index,min:t.min,priority:t.priority,lock:0===t.index||1===t.priority})),e);this._applyVisibility(s);const i=Array.from(s).some(t=>0!==t);this._updateTogglesVisibility(i,s),this.emit("refit",{table:this.table,initial:t,anyHidden:i})}toggle(t){if(!t||t.classList.contains(this.options.classNames.details))return;const e=t.querySelector(this._toggleSelector),s=t.nextElementSibling;if(!e||!s||!s.classList.contains(this.options.classNames.details))return;const i="true"===e.getAttribute("aria-expanded");if(i)e.setAttribute("aria-expanded","false"),e.innerHTML=this.options.icons.expand+`<span class="ctbl-vh">${this.options.strings.show}</span>`,s.hidden=!0,this.emit("collapse",{table:this.table,row:t});else{e.setAttribute("aria-expanded","true"),e.innerHTML=this.options.icons.collapse+`<span class="ctbl-vh">${this.options.strings.hide}</span>`;const i=new Set(this.columnsMeta.filter(t=>t.th.classList.contains(this.options.classNames.hide)).map(t=>t.index));this._renderDetailsForRow(t,s,i),s.hidden=!1,this.emit("expand",{table:this.table,row:t})}this.emit("toggle",{table:this.table,row:t,expanded:!i})}expandAll(){if(this.columnsMeta.some(t=>0!==t.index&&t.th.classList.contains(this.options.classNames.hide)))for(const t of this.tbodies){const e=Array.from(t.rows).filter(t=>!t.classList.contains(this.options.classNames.details));for(const t of e){const e=t.querySelector(this._toggleSelector);e&&("true"!==e.getAttribute("aria-expanded")&&this.toggle(t))}}}collapseAll(){for(const t of this.tbodies){const e=Array.from(t.rows).filter(t=>!t.classList.contains(this.options.classNames.details));for(const t of e){const e=t.querySelector(this._toggleSelector);e&&("true"===e.getAttribute("aria-expanded")&&this.toggle(t))}}}expandRow(t){const e=this._resolveDataRow(t);if(!e)return;const s=e.querySelector(this._toggleSelector);s&&"true"!==s.getAttribute("aria-expanded")&&this.toggle(e)}collapseRow(t){const e=this._resolveDataRow(t);if(!e)return;const s=e.querySelector(this._toggleSelector);s&&"true"===s.getAttribute("aria-expanded")&&this.toggle(e)}_resolveDataRow(t){if(t instanceof HTMLTableRowElement)return t;const e=Number(t);if(!Number.isFinite(e))return null;return this.tbodies.flatMap(t=>Array.from(t.rows).filter(t=>!t.classList.contains(this.options.classNames.details)))[e]||null}refresh(){this.columnsMeta.forEach((t,e)=>{if(0===e)return void(t.min=this.options.controlWidth);const s=Number(t.th.getAttribute(this.options.attrs.min))||0,i=Math.ceil(t.th.clientWidth||t.th.offsetWidth||0);t.min=s>0?s:i>0?i:this.options.minWidthDefault}),this._syncDetailsColspan(),this._refit()}destroy(){this._destroyed=!0,this._resizeObserver&&this._resizeObserver.disconnect&&this._resizeObserver.disconnect(),this._headerResizeObserver&&this._headerResizeObserver.disconnect&&this._headerResizeObserver.disconnect(),this._intersectObserver&&this._intersectObserver.disconnect&&this._intersectObserver.disconnect(),this._tbodyObservers&&this._tbodyObservers.forEach(t=>t.disconnect&&t.disconnect()),this._theadObserver&&this._theadObserver.disconnect&&this._theadObserver.disconnect(),this._tableObserver&&this._tableObserver.disconnect&&this._tableObserver.disconnect(),this._clickHandler&&this.table.removeEventListener("click",this._clickHandler),this._keyHandler&&this.table.removeEventListener("keydown",this._keyHandler),this._onWinResize&&window.removeEventListener("resize",this._onWinResize);for(const t of this.columnsMeta)t.th.classList.remove(this.options.classNames.hide);for(const t of this.tbodies)for(const e of Array.from(t.rows))if(!e.classList.contains(this.options.classNames.details))for(const t of this.columnsMeta){const s=e.cells[t.index];s&&s.classList.remove(this.options.classNames.hide)}for(const t of this.tbodies)for(const e of Array.from(t.rows))e.classList.contains(this.options.classNames.details)&&e.remove();if(this.table.querySelectorAll(this._toggleSelector).forEach(t=>t.remove()),this._insertedControl){this.headerRow&&this.headerRow.cells&&this.headerRow.cells[0]&&this.headerRow.deleteCell(0);for(const t of this.tbodies)for(const e of Array.from(t.rows))e.classList.contains(this.options.classNames.details)||e.cells&&e.cells.length&&e.deleteCell(0)}this.emit("destroy",{table:this.table})}}return class{constructor(t={}){this.defaults={controlWidth:46,minWidthDefault:140,tableLayout:"auto",deferWhenHidden:!0,attrs:{priority:"data-priority",min:"data-min",label:"data-label"},classNames:{root:"ctbl",control:"ctbl-control",toggle:"ctbl-toggle",details:"ctbl-details",detailsInner:"ctbl-details-inner",detail:"ctbl-detail",name:"ctbl-name",value:"ctbl-value",hide:"ctbl-hide"},icons:{expand:"+",collapse:"−"},strings:{toggleTitle:"Show more",show:"Show details",hide:"Hide details"},detailsRender:void 0,mode:e},this.options=a(this.defaults,t),this._mode=s(this.options.mode),this._tables=new Map,this._events={}}getMode(){return this._mode}setMode(t){const e=s(t);return this._mode=e,this.options.mode=e,this._tables.forEach(t=>t._setMode(e)),e}set(t,e={}){const s=o(t);if(!s)throw new Error("CollapseTable.set: target not found.");if(!(s instanceof HTMLTableElement))throw new Error("CollapseTable.set: target must be a <table> element or its id.");if(this._tables.has(s)){const t=this._tables.get(s);return t.options=a(this.options,e),t._toggleSelector=c(t.options.classNames.toggle),t.table.style.tableLayout&&t.table.style.tableLayout===t.options.tableLayout||(t.table.style.tableLayout=t.options.tableLayout),t._setMode(this._mode),t.refresh(),t}const i=a(this.options,e),n=new f(s,i,this._emit.bind(this),this._mode);return this._tables.set(s,n),n}setAll(t,e={}){return n(t).filter(t=>t instanceof HTMLTableElement).map(t=>this.set(t,e))}unset(t){const e=o(t);if(!e)return;const s=this._tables.get(e);s&&(s.destroy(),this._tables.delete(e))}unsetAll(t){const e=n(t).filter(t=>t instanceof HTMLTableElement);for(const t of e)this.unset(t)}refresh(t){if(!t)return void this._tables.forEach(t=>t.refresh());const e=o(t);if(!e)return;const s=this._tables.get(e);s&&s.refresh()}expandAll(t){if(t){const e=o(t),s=this._tables.get(e);s&&s.expandAll()}else this._tables.forEach(t=>t.expandAll())}collapseAll(t){if(t){const e=o(t),s=this._tables.get(e);s&&s.collapseAll()}else this._tables.forEach(t=>t.collapseAll())}expandRow(t,e){const s=o(t),i=s&&this._tables.get(s);i&&i.expandRow(e)}collapseRow(t,e){const s=o(t),i=s&&this._tables.get(s);i&&i.collapseRow(e)}getOptions(){return a({},this.options)}updateOptions(t){if(t&&void 0!==t.mode){this.setMode(t.mode);const{mode:e,...s}=t;t=s}this.options=a(this.options,t),this._tables.forEach(e=>{e.options=a(e.options,t),t&&t.classNames&&"string"==typeof t.classNames.toggle&&(e._toggleSelector=c(e.options.classNames.toggle)),t&&void 0!==t.tableLayout&&(e.table.style.tableLayout=e.options.tableLayout),e.refresh()})}on(t,e){this._events[t]||(this._events[t]=new Set),this._events[t].add(e)}off(t,e){this._events[t]&&this._events[t].delete(e)}_emit(t,e){if(this._events[t])for(const s of this._events[t])try{s(e)}catch(t){}}static get version(){return"1.2.0"}}});
//# sourceMappingURL=collapsetable.min.js.map