{"version":3,"names":["root","factory","define","amd","module","exports","CollapseTable","self","this","raf","fn","window","requestAnimationFrame","setTimeout","toElement","target","startsWith","document","getElementById","slice","querySelector","nodeType","normalizeElements","input","Array","from","querySelectorAll","Element","NodeList","HTMLCollection","isArray","filter","n","createEl","tag","cls","el","createElement","className","oncePerTable","table","key","s","_store","WeakMap","set","get","Set","has","add","merge","base","extra","out","Object","assign","k","prototype","hasOwnProperty","call","v","isVisible","style","getComputedStyle","display","visibility","TableController","constructor","options","emit","HTMLTableElement","Error","_rowKeyMap","_rowKeySeq","_unsupportedSpan","_destroyed","_initOnce","id","type","appendChild","createTextNode","head","injectCoreStylesOnce","classList","contains","classNames","width","tableLayout","thead","tHead","rows","length","headerRow","tbodies","tBodies","_checkSpans","_ensureControlColumn","headers","cells","ctrlIndex","_buildColumns","_mountAllBodies","_refit","_observe","hasSpanInHead","some","th","colSpan","rowSpan","hasSpanInBody","tb","tr","td","console","warn","_getWrapper","parentElement","control","setAttribute","insertBefore","firstChild","row","ths","forEach","remove","hide","measure","hinted","Number","getAttribute","attrs","min","w","Math","ceil","clientWidth","offsetWidth","minWidthDefault","cols","priorities","i","isControl","priorityAttr","priority","controlWidth","lock","push","index","ones","p","isNaN","columnsMeta","_mountRowsInBody","_clickHandler","e","btn","closest","toggle","preventDefault","_keyHandler","addEventListener","tbody","dataRows","r","details","String","ctrlCell","_detailsIdForRow","strings","toggleTitle","innerHTML","icons","expand","next","nextElementSibling","detailsRow","wrap","detailsInner","insertAdjacentElement","wrapper","RO","ResizeObserver","_resizeObserver","observe","_headerResizeObserver","refresh","_onWinResize","wait","t","ctx","args","last","now","Date","arguments","remaining","clearTimeout","apply","throttle","deferWhenHidden","IO","IntersectionObserver","_intersectObserver","entries","entry","isIntersecting","threshold","MO","MutationObserver","WebKitMutationObserver","MozMutationObserver","_tbodyObservers","map","m","childList","subtree","_theadObserver","mutations","mustRebuild","tagName","attributes","attributeFilter","label","_availableWidth","innerWidth","_applyVisibility","hiddenSet","col","_firstVisibleCellText","txt","textContent","trim","_renderDetailsForRow","primary","detailsRender","hiddenCols","c","result","Node","item","detail","name","value","_updateTogglesVisibility","anyHidden","hideControlCol","ctrlTh","ctrlTd","hiddenCount","expanded","hidden","initial","available","sumMin","reduce","guard","candidate","sort","a","b","changed","computeHiddenColumns","show","collapse","expandAll","collapseAll","expandRow","rowOrIndex","_resolveDataRow","collapseRow","HTMLTableRowElement","idx","isFinite","flatMap","destroy","disconnect","removeEventListener","globalOptions","defaults","undefined","_tables","Map","_events","perTableOptions","ctrl","merged","controller","_emit","bind","setAll","targets","unset","delete","unsetAll","list","getOptions","updateOptions","partial","on","event","handler","off","_","version"],"sources":["dist/collapsetable.js"],"mappings":"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","ignoreList":[]}